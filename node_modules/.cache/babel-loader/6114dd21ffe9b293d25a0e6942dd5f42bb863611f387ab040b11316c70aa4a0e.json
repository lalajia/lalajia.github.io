{"ast":null,"code":"const crossfetch = require('cross-fetch');\nconst BASE_API_PATH = \"https://api.countapi.xyz\";\nconst validPattern = /^[A-Za-z0-9_\\-.]{3,64}$/;\nconst validRegex = new RegExp(validPattern);\nconst validatePath = module.exports.validatePath = function (namespace, key) {\n  if (typeof key === \"undefined\") {\n    if (typeof namespace === \"undefined\") {\n      return Promise.reject(\"Missing key\");\n    }\n    key = namespace;\n    namespace = undefined;\n  }\n  function validName(name) {\n    return validRegex.test(name) || name === ':HOST:' || name === ':PATHNAME:';\n  }\n  return new Promise(function (resolve, reject) {\n    if (!validName(key)) {\n      reject(`Key must match ${validPattern}. Got '${namespace}'`);\n      return;\n    }\n    if (!validName(namespace) && typeof namespace !== \"undefined\" && namespace !== null) {\n      reject(`Namespace must match ${validPattern} or be empty. Got '${namespace}'`);\n      return;\n    }\n    var path = '';\n    if (typeof namespace !== \"undefined\") path += namespace + '/';\n    path += key;\n    resolve({\n      path: path\n    });\n  });\n};\nconst validateTuple = module.exports.validateTuple = function (namespace, key, value) {\n  if (typeof value === \"undefined\") {\n    if (typeof key === \"undefined\") {\n      return Promise.reject(\"Missing key or value\");\n    }\n    value = key;\n    key = undefined;\n  }\n  if (typeof value !== \"number\") {\n    return Promise.reject(\"Value is NaN\");\n  }\n  return validatePath(namespace, key).then(function (result) {\n    return Object.assign({}, {\n      value: value\n    }, result);\n  });\n};\nfunction finalize(res) {\n  const valid_responses = [200, 400, 403, 404];\n  if (valid_responses.includes(res.status)) {\n    return res.json().then(function (json) {\n      if (res.status == 400) return Promise.reject(json.error);\n      return Object.assign({}, {\n        status: res.status,\n        path: res.headers.get('X-Path')\n      }, json);\n    });\n  }\n  return Promise.reject(\"Response from server: \" + res.status);\n}\nfunction queryParams(params) {\n  return Object.keys(params || {}).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&');\n}\nmodule.exports.get = function (namespace, key) {\n  return validatePath(namespace, key).then(function (result) {\n    return crossfetch(`${BASE_API_PATH}/get/${result.path}`).then(finalize);\n  });\n};\nmodule.exports.set = function (namespace, key, value) {\n  return validateTuple(namespace, key, value).then(function (result) {\n    return crossfetch(`${BASE_API_PATH}/set/${result.path}?value=${result.value}`).then(finalize);\n  });\n};\nmodule.exports.update = function (namespace, key, amount) {\n  return validateTuple(namespace, key, amount).then(function (result) {\n    return crossfetch(`${BASE_API_PATH}/update/${result.path}?amount=${result.value}`).then(finalize);\n  });\n};\nmodule.exports.hit = function (namespace, key) {\n  return validatePath(namespace, key).then(function (result) {\n    return crossfetch(`${BASE_API_PATH}/hit/${result.path}`).then(finalize);\n  });\n};\nmodule.exports.info = function (namespace, key) {\n  return validatePath(namespace, key).then(function (result) {\n    return crossfetch(`${BASE_API_PATH}/info/${result.path}`).then(finalize);\n  });\n};\nmodule.exports.create = function (options) {\n  var params = queryParams(options);\n  return crossfetch(`${BASE_API_PATH}/create${params.length > 0 ? '?' + params : ''}`).then(finalize);\n};\nmodule.exports.stats = function () {\n  return crossfetch(`${BASE_API_PATH}/stats`).then(finalize);\n};\nmodule.exports.visits = function (page) {\n  return this.hit(':HOST:', page ? page : ':PATHNAME:');\n};\nmodule.exports.event = function (name) {\n  return this.hit(':HOST:', name);\n};","map":{"version":3,"names":["crossfetch","require","BASE_API_PATH","validPattern","validRegex","RegExp","validatePath","module","exports","namespace","key","Promise","reject","undefined","validName","name","test","resolve","path","validateTuple","value","then","result","Object","assign","finalize","res","valid_responses","includes","status","json","error","headers","get","queryParams","params","keys","map","k","encodeURIComponent","join","set","update","amount","hit","info","create","options","length","stats","visits","page","event"],"sources":["/Users/selenazheng/Desktop/lalajia.github.io/node_modules/countapi-js/lib/index.js"],"sourcesContent":["const crossfetch = require('cross-fetch');\r\n\r\nconst BASE_API_PATH = \"https://api.countapi.xyz\";\r\nconst validPattern = /^[A-Za-z0-9_\\-.]{3,64}$/;\r\nconst validRegex = new RegExp(validPattern);\r\n\r\nconst validatePath = module.exports.validatePath = function(namespace, key) {\r\n    if(typeof key === \"undefined\") {\r\n        if(typeof namespace === \"undefined\") {\r\n            return Promise.reject(\"Missing key\");\r\n        }\r\n        key = namespace;\r\n        namespace = undefined;\r\n    }\r\n\r\n    function validName(name) {\r\n        return validRegex.test(name) || name === ':HOST:' || name === ':PATHNAME:';\r\n    }\r\n\r\n    return new Promise(function(resolve, reject) {\r\n        if(!validName(key)) {\r\n            reject(`Key must match ${validPattern}. Got '${namespace}'`);\r\n            return;\r\n        }\r\n        if(!validName(namespace) && typeof namespace !== \"undefined\" && namespace !== null) {\r\n            reject(`Namespace must match ${validPattern} or be empty. Got '${namespace}'`);\r\n            return;\r\n        }\r\n        \r\n        var path = '';\r\n        if(typeof namespace !== \"undefined\")\r\n            path += namespace + '/';\r\n        path += key;\r\n        \r\n        resolve({\r\n            path: path\r\n        });\r\n    });\r\n}\r\n\r\nconst validateTuple = module.exports.validateTuple = function(namespace, key, value) {\r\n    if(typeof value === \"undefined\") {\r\n        if(typeof key === \"undefined\") {\r\n            return Promise.reject(\"Missing key or value\");\r\n        }\r\n        value = key;\r\n        key = undefined;\r\n    }\r\n    if(typeof value !== \"number\") {\r\n        return Promise.reject(\"Value is NaN\");\r\n    }\r\n\r\n    return validatePath(namespace, key).then(function(result) {\r\n        return Object.assign({}, { value: value }, result);\r\n    });\r\n}\r\n\r\nfunction finalize(res) {\r\n    const valid_responses = [200, 400, 403, 404];\r\n    if (valid_responses.includes(res.status)) {\r\n        return res.json().then(function(json) {\r\n            if(res.status == 400)\r\n                return Promise.reject(json.error);\r\n            return Object.assign({}, {\r\n                status: res.status,\r\n                path: res.headers.get('X-Path')\r\n            }, json);\r\n        });\r\n    }\r\n    return Promise.reject(\"Response from server: \" + res.status);\r\n}\r\n\r\nfunction queryParams(params) {\r\n    return Object.keys(params || {})\r\n        .map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k]))\r\n        .join('&');\r\n}\r\n\r\nmodule.exports.get = function(namespace, key) {\r\n    return validatePath(namespace, key).then(function(result) {\r\n        return crossfetch(`${BASE_API_PATH}/get/${result.path}`).then(finalize);\r\n    });\r\n};\r\n\r\nmodule.exports.set = function(namespace, key, value) {\r\n    return validateTuple(namespace, key, value).then(function(result) {\r\n        return crossfetch(`${BASE_API_PATH}/set/${result.path}?value=${result.value}`).then(finalize);\r\n    });\r\n};\r\n\r\nmodule.exports.update = function(namespace, key, amount) {\r\n    return validateTuple(namespace, key, amount).then(function(result) {\r\n        return crossfetch(`${BASE_API_PATH}/update/${result.path}?amount=${result.value}`).then(finalize);\r\n    });\r\n};\r\n\r\nmodule.exports.hit = function(namespace, key) {\r\n    return validatePath(namespace, key).then(function(result) {\r\n        return crossfetch(`${BASE_API_PATH}/hit/${result.path}`).then(finalize);\r\n    });\r\n};\r\n\r\nmodule.exports.info = function(namespace, key) {\r\n    return validatePath(namespace, key).then(function(result) {\r\n        return crossfetch(`${BASE_API_PATH}/info/${result.path}`).then(finalize);\r\n    });\r\n};\r\n\r\nmodule.exports.create = function(options) {\r\n    var params = queryParams(options);\r\n    return crossfetch(`${BASE_API_PATH}/create${params.length > 0 ? '?' + params : ''}`).then(finalize);\r\n};\r\n\r\nmodule.exports.stats = function() {\r\n    return crossfetch(`${BASE_API_PATH}/stats`).then(finalize);\r\n};\r\n\r\nmodule.exports.visits = function(page) {\r\n    return this.hit(':HOST:', page ? page : ':PATHNAME:');\r\n};\r\n\r\nmodule.exports.event = function(name) {\r\n    return this.hit(':HOST:', name);\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}